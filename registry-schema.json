{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Component Registry Schema",
  "description": "Schema for the component registry that drives the demo platform",
  "type": "object",
  "required": ["version", "components"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Registry version (semver)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "components": {
      "type": "array",
      "description": "Array of component definitions",
      "items": {
        "$ref": "#/definitions/component"
      }
    }
  },
  "definitions": {
    "component": {
      "type": "object",
      "required": ["id", "title", "description", "category", "status", "source", "demo", "design"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique component identifier (kebab-case)",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Human-readable component title"
        },
        "description": {
          "type": "string",
          "description": "Component description for cards and metadata"
        },
        "category": {
          "type": "string",
          "enum": [
            "animation",
            "interaction",
            "form",
            "navigation",
            "layout",
            "visual",
            "data-display",
            "feedback"
          ],
          "description": "Component category for grouping"
        },
        "status": {
          "type": "string",
          "enum": ["stable", "experimental"],
          "description": "Component stability status"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Searchable tags"
        },
        "date": {
          "type": "string",
          "format": "date",
          "description": "Component creation/update date (YYYY-MM-DD)"
        },
        "featured": {
          "type": "boolean",
          "description": "Whether component is featured"
        },
        "new": {
          "type": "boolean",
          "description": "Whether component is newly added"
        },
        "source": {
          "$ref": "#/definitions/source"
        },
        "demo": {
          "$ref": "#/definitions/demo"
        },
        "design": {
          "$ref": "#/definitions/design"
        },
        "readme": {
          "type": "string",
          "description": "Detailed component documentation"
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "NPM package dependencies"
        }
      }
    },
    "source": {
      "type": "object",
      "required": ["type", "path"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["local", "remote", "user-uploaded"],
          "description": "Component source type"
        },
        "path": {
          "type": "string",
          "description": "File path (local) or identifier (remote/uploaded)"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Remote URL (for remote type)"
        },
        "integrity": {
          "type": "string",
          "description": "Subresource integrity hash (for remote type)"
        },
        "sandboxed": {
          "type": "boolean",
          "description": "Whether to render in sandboxed iframe (for user-uploaded)"
        }
      }
    },
    "demo": {
      "type": "object",
      "required": ["variants", "defaultProps"],
      "properties": {
        "variants": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Available component variants",
          "minItems": 1
        },
        "defaultProps": {
          "type": "object",
          "description": "Default props to pass to component",
          "additionalProperties": true
        }
      }
    },
    "design": {
      "type": "object",
      "required": ["surface", "motion"],
      "properties": {
        "surface": {
          "type": "string",
          "enum": ["flat", "elevated", "inset"],
          "description": "Surface treatment for demo container"
        },
        "motion": {
          "type": "string",
          "enum": ["spring", "smooth", "linear", "none"],
          "description": "Motion behavior for demo container"
        }
      }
    }
  }
}
